:root {
    /* Color Palette */
    --primary-color: #E71D36; /* Red */
    --secondary-color: #2EC4B6; /* Teal */
    --background-color-light: #F9FAFB; /* Light Gray - Changed from #FFFFFF for slight off-white */
    --background-color-dark: #121212;
    --surface-color-light: #FFFFFF;
    --surface-color-dark: #1E1E1E;
    --text-color-primary-light: #1F2937; /* Dark Gray */
    --text-color-secondary-light: #6B7280; /* Medium Gray */
    --text-color-primary-dark: #F9FAFB; /* Light Gray */
    --text-color-secondary-dark: #D1D5DB; /* Medium-Light Gray */
    --accent-color-success: #10B981; /* Green */
    --accent-color-error: #EF4444;   /* Red */
    --accent-color-warning: #F59E0B; /* Amber */
    --border-color-light: #E5E7EB; /* Light Gray */
    --border-color-dark: #374151; /* Dark Gray */

    /* Typography */
    --font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;

    /* Spacing (8px grid) */
    --space-1: 0.25rem; /* 4px */
    --space-2: 0.5rem;  /* 8px */
    --space-3: 0.75rem; /* 12px */
    --space-4: 1rem;    /* 16px */
    --space-5: 1.25rem; /* 20px */
    --space-6: 1.5rem;  /* 24px */
    --space-8: 2rem;    /* 32px */
    --space-10: 2.5rem; /* 40px */
    --space-12: 3rem;   /* 48px */

    /* Borders */
    --border-radius-small: 0.25rem; /* 4px */
    --border-radius-medium: 0.5rem; /* 8px */
    --border-radius-large: 1rem;   /* 16px */
    --border-width: 1px;
    --border-width-medium: 2px;

    /* Shadows - Subtle */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

    /* Transitions */
    --transition-duration: 0.2s;
    --transition-timing-function: ease-in-out;
}

/* Global Reset / Base Styles */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 100%;
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

body {
    font-family: var(--font-family-primary);
    font-weight: var(--font-weight-normal);
    line-height: 1.6;
    background-color: var(--background-color-light);
    color: var(--text-color-primary-light);
    padding-bottom: 70px; /* Space for bottom nav */
}

/* Basic Typography */
h1, h2, h3, h4, h5, h6 {
    font-weight: var(--font-weight-bold);
    line-height: 1.3;
    margin-bottom: var(--space-3);
    color: var(--text-color-primary-light);
}

h1 { font-size: 2rem; } /* Example sizes, can be adjusted */
h2 { font-size: 1.75rem; }
h3 { font-size: 1.5rem; }

p {
    margin-bottom: var(--space-4);
    color: var(--text-color-secondary-light);
}

a { /* Added outline:none here as well */
    color: var(--primary-color);
    text-decoration: none;
    transition: color var(--transition-duration) var(--transition-timing-function);
    outline: none; /* Added for focus-visible */
}

a:hover {
    color: #A01427; /* Darker shade of primary-color */
}

img, video, canvas, svg {
    max-width: 100%;
    height: auto;
    display: block;
}

button {
    font-family: var(--font-family-primary);
    cursor: pointer;
    border: none;
    background-color: transparent;
    transition: background-color var(--transition-duration) var(--transition-timing-function), color var(--transition-duration) var(--transition-timing-function);
    outline: none; /* Added for focus-visible */
}

input, textarea, select {
    font-family: var(--font-family-primary);
    font-size: 1rem;
    outline: none; /* Added for focus-visible */
    padding: var(--space-2) var(--space-3);
    border: var(--border-width) solid var(--border-color-light);
    border-radius: var(--border-radius-medium);
    background-color: var(--surface-color-light);
    color: var(--text-color-primary-light);
    width: 100%;
    margin-bottom: var(--space-3);
}

input:focus, textarea:focus, select:focus {
    outline: none; /* This is overridden by :focus-visible for keyboard users */
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(231, 29, 54, 0.2); /* Focus ring with primary color */
}

label {
    display: block;
    font-weight: var(--font-weight-medium);
    margin-bottom: var(--space-1);
    color: var(--text-color-primary-light);
}

/* Utility for visually hidden, accessible to screen readers */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

/* App Container */
#app-container {
    max-width: 1200px; /* Max width for larger screens */
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    min-height: calc(100vh - 70px); /* Full height minus bottom nav */
}

/* Header */
.app-header {
    background-color: var(--surface-color-light);
    padding: var(--space-3) var(--space-4);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: var(--border-width) solid var(--border-color-light);
    box-shadow: var(--shadow-sm);
}

#logo-container h1 {
    font-size: 1.5rem; /* Adjusted from global h1 */
    color: var(--primary-color);
    margin-bottom: 0; /* Override default heading margin */
}

#header-cart-icon .cart-icon {
    font-size: 1.5rem; /* Adjust icon size */
}
#header-cart-icon .cart-badge {
    background-color: var(--primary-color);
    color: var(--surface-color-light);
    font-size: 0.75rem;
    font-weight: var(--font-weight-bold);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--border-radius-large);
    position: relative;
    top: -0.5em;
    right: -0.25em;
}

/* Main Content Area */
main {
    flex-grow: 1;
    padding: var(--space-4);
}

section { /* Default padding for views */
    padding: var(--space-4) 0;
}

/* Menu View */
#menu-view .search-bar-container input[type="search"] {
    margin-bottom: var(--space-4);
}

.category-filters-container {
    display: flex;
    overflow-x: auto; /* Horizontal scroll on mobile */
    padding-bottom: var(--space-2); /* For scrollbar */
    margin-bottom: var(--space-4);
    gap: var(--space-2);
}

.category-filter {
    padding: var(--space-2) var(--space-4);
    border-radius: var(--border-radius-large);
    background-color: var(--border-color-light); /* Neutral background */
    color: var(--text-color-secondary-light);
    font-weight: var(--font-weight-medium);
    white-space: nowrap;
}

.category-filter.active, .category-filter:hover {
    background-color: var(--primary-color);
    color: var(--surface-color-light);
}

#menu-items-list li { /* Conceptual Menu Item Card */
    background-color: var(--surface-color-light);
    border: var(--border-width) solid var(--border-color-light);
    border-radius: var(--border-radius-medium);
    padding: var(--space-4);
    margin-bottom: var(--space-4);
    box-shadow: var(--shadow-sm);
    /* Add flex/grid for internal layout later */
}
#menu-items-list li span { /* Example for item name */
    font-weight: var(--font-weight-semibold);
    color: var(--text-color-primary-light);
}

/* Checkout View */
#checkout-view h2, #order-history-view h2 {
    margin-bottom: var(--space-6);
}
#checkout-view h3 { /* Step Headings */
    font-size: 1.25rem;
    margin-bottom: var(--space-4);
    padding-bottom: var(--space-2);
    border-bottom: var(--border-width-medium) solid var(--primary-color);
    display: inline-block; /* So border only spans text width */
}

#address-form-fields div { /* Spacing for form field containers */
    margin-bottom: var(--space-4);
}

#payment-step #pix-qr-code {
    margin: var(--space-4) auto;
    padding: var(--space-2);
    background-color: var(--surface-color-light);
    border: var(--border-width) solid var(--border-color-light);
    width: 220px;  /* Container width for 200px QR + padding */
    height: 220px;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: var(--shadow-sm);
}
#payment-step #pix-copy-paste-code {
    display: block;
    padding: var(--space-3);
    background-color: var(--background-color-light);
    border: var(--border-width) dashed var(--border-color-light);
    word-break: break-all;
    margin-top: var(--space-4);
    border-radius: var(--border-radius-medium);
    font-family: monospace;
    color: var(--text-color-secondary-light);
}


/* Footer */
.app-footer {
    background-color: var(--text-color-primary-light);
    color: var(--text-color-primary-dark);
    padding: var(--space-6) var(--space-4);
    text-align: center;
    font-size: 0.875rem;
}
.app-footer p {
    color: var(--text-color-secondary-dark);
    margin-bottom: 0;
}

/* Bottom Navigation Bar */
#bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: var(--surface-color-light);
    border-top: var(--border-width) solid var(--border-color-light);
    box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: var(--space-2) 0;
    z-index: 1000;
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--text-color-secondary-light);
    font-size: 0.75rem; /* Text size */
    padding: var(--space-1) var(--space-3);
    position: relative; /* For badge positioning */
}
.nav-item .nav-icon {
    font-size: 1.5rem; /* Icon size */
    margin-bottom: var(--space-1);
}
.nav-item.active, .nav-item:hover {
    color: var(--primary-color);
}
.nav-item .cart-badge-nav {
    position: absolute;
    top: var(--space-1);
    right: var(--space-1);
    background-color: var(--primary-color);
    color: var(--surface-color-light);
    font-size: 0.7rem;
    font-weight: var(--font-weight-bold);
    padding: 2px 5px;
    border-radius: 50%;
    min-width: 16px;
    text-align: center;
}


/* Buttons */
.btn {
    display: inline-block;
    padding: var(--space-3) var(--space-6);
    border-radius: var(--border-radius-medium);
    font-weight: var(--font-weight-semibold);
    text-align: center;
    transition: background-color var(--transition-duration) var(--transition-timing-function),
                color var(--transition-duration) var(--transition-timing-function),
                transform var(--transition-duration) var(--transition-timing-function);
    border: var(--border-width) solid transparent;
    font-size: 1rem;
    width: 100%; /* Default to full width for mobile-first */
    margin-bottom: var(--space-3); /* Default spacing for buttons */
}
.btn:hover {
    transform: translateY(-2px); /* Subtle lift */
}
.btn:active {
    transform: translateY(0px);
    filter: brightness(0.95);
}

.btn-primary {
    background-color: var(--primary-color);
    color: var(--surface-color-light);
}
.btn-primary:hover {
    background-color: #A01427; /* Darker primary */
    color: var(--surface-color-light);
}

.btn-secondary {
    background-color: var(--secondary-color);
    color: var(--text-color-primary-light); /* Ensure contrast */
}
.btn-secondary:hover {
    background-color: #208F83; /* Darker secondary */
    color: var(--text-color-primary-light); /* Ensure contrast */
}

.btn-outline {
    background-color: transparent;
    color: var(--primary-color);
    border-color: var(--primary-color);
}
.btn-outline:hover {
    background-color: rgba(231, 29, 54, 0.1); /* Light primary background */
    color: var(--primary-color);
}


/* Responsive Visibility */
.desktop-only { display: none; }

@media (min-width: 768px) { /* Tablet and above */
    body {
        padding-bottom: 0; /* Remove padding for bottom nav if it's hidden */
    }
    .mobile-only { display: none !important; } /* Important to override inline styles if any */
    .desktop-only { display: block; } /* Or flex, inline-block etc. as needed */
    
    /* Adjust button widths for desktop if needed */
    .btn {
        width: auto; /* Allow buttons to size to content on desktop */
        min-width: 120px; /* Example min-width */
    }
    #checkout-view .btn { /* Keep checkout buttons full width or adjust as needed */
        width: 100%;
    }
}


/* Existing specific styles (review and refactor/remove in subsequent steps) */
/* Commenting out styles that are now handled by global styles or need complete rethink */

/* header already styled by .app-header */
/* header h1 already styled by #logo-container h1 or global h1 */
/* header p - if needed, add specific class and style with tokens */

/* main is now a flex item, padding added via section */
/* #menu-container ul - padding handled by global reset */
/* #menu-container li - partially handled by #menu-items-list li, needs full review */

/* .add-to-cart-btn - use .btn.btn-primary or similar */
/* footer - styled by .app-footer */

/* #cart-container - now part of #checkout-view */
/* #cart-items p - specific styling, review */
/* .cart-item - needs review within #checkout-view */
/* .remove-from-cart-btn - use .btn.btn-outline or similar with error color */
/* #cart-total - basic styling, review */
/* #checkout-button - replaced by step buttons, use .btn.btn-primary */

/* #pix-display-container - now part of #payment-step */
/* #pix-qr-code - styled within #payment-step */
/* #pix-copy-paste-code - styled within #payment-step */
/* #confirm-payment-button - use .btn.btn-secondary or other */
/* #whatsapp-share-button - use .btn.btn-secondary or other */

/* #order-history-container - now #order-history-view */
/* .past-order - needs review with tokens */
/* .order-again-btn - use .btn.btn-secondary or .btn-outline */

/* Button Active States - .btn:active handles general feedback now */

/* Media Queries - existing ones need full review and integration with token-based responsive design */
/* Specific overrides within existing media queries are largely commented or will be removed as components are refactored */

@media (max-width: 768px) {
    /* body { font-size: 14px; } */ /* Base font-size adjusted globally if needed */
    /* header h1 { font-size: 1.5rem; } */
    main {
        padding: var(--space-2); /* Reduced padding for main on mobile */
    }
    /* button styles in media queries need to be re-evaluated against new .btn classes */
}

@media (max-width: 600px) {
    #menu-items-list li,  /* Assuming this is the new menu item list */
    #cart-items .cart-item { /* Assuming .cart-item is still used */
        flex-direction: column;
        align-items: flex-start;
    }

    #menu-items-list li span, /* Example for item name */
    #cart-items .cart-item span { /* Example for item text */
        margin-bottom: var(--space-2);
    }

    /* .add-to-cart-btn, (old class) */
    /* .remove-from-cart-btn { (old class) */
        /* width: 100%;
        margin-left: 0;
        padding: var(--space-3);
        box-sizing: border-box;
    } */
}

/* Further adjustments for very small screens (e.g., less than 400px) */
/* @media (max-width: 400px) { ... } */
#address-form-fields {
    padding: var(--space-2) 0;
}

#address-step .btn { /* Ensure address step button is full width */
    width: 100%;
}
#order-summary-step .btn {
    width: 100%;
}

/* Ensure cart items have some styling */
#cart-items .cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-2) 0;
    border-bottom: var(--border-width) solid var(--border-color-light);
}
#cart-items .cart-item:last-child {
    border-bottom: none;
}
#cart-items .cart-item span {
    flex-grow: 1;
}
#cart-items .remove-from-cart-btn { /* Basic styling for now */
    background-color: var(--accent-color-error);
    color: var(--surface-color-light);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--border-radius-small);
    font-size: 0.8rem;
    margin-left: var(--space-2);
}
#cart-items .remove-from-cart-btn:hover {
    filter: brightness(0.9);
}

#past-orders-list .past-order {
    background-color: var(--surface-color-light);
    border: var(--border-width) solid var(--border-color-light);
    border-radius: var(--border-radius-medium);
    padding: var(--space-4);
    margin-bottom: var(--space-4);
    box-shadow: var(--shadow-sm);
}
#past-orders-list .past-order h3 {
    font-size: 1.1rem;
    color: var(--text-color-primary-light);
    margin-bottom: var(--space-2);
}
#past-orders-list .past-order ul {
    list-style: none; /* Or disc, if preferred */
    padding-left: 0;
    margin-bottom: var(--space-3);
}
#past-orders-list .past-order li {
    font-size: 0.9rem;
    color: var(--text-color-secondary-light);
    margin-bottom: var(--space-1);
}
#past-orders-list .order-again-btn { /* Basic styling for now */
    background-color: var(--secondary-color);
    color: var(--surface-color-light);
    padding: var(--space-2) var(--space-3);
}
#past-orders-list .order-again-btn:hover {
    filter: brightness(0.9);
}

/* Address form specific styling */
#address-form-fields div {
    margin-bottom: var(--space-3); /* Consistent spacing between form rows */
}

#address-form-fields label {
    font-size: 0.875rem; /* Slightly smaller label */
    color: var(--text-color-secondary-light); /* Lighter color for labels */
    margin-bottom: var(--space-1);
}

#address-form-fields input[type="text"] {
    border-color: var(--border-color-light); /* Default border */
}
#address-form-fields input[type="text"]:focus {
    border-color: var(--primary-color); /* Primary color border on focus */
    box-shadow: 0 0 0 2px rgba(231, 29, 54, 0.15); /* Softer focus shadow */
}
#menu-items-list {
    padding-top: var(--space-4);
}
/* Ensure that the cart-badge on the desktop header is visible if not empty */
#header-cart-icon .cart-badge:empty {
    /* display: none; */ /* JS will handle visibility based on count > 0 */
}
/* Ensure cart badge in bottom nav is visible if not empty */
#bottom-nav .cart-badge-nav:empty {
     /* display: none; */ /* JS will handle visibility based on count > 0 */
}

/* Accessibility & Performance Improvements */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

a:focus-visible,
button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline: 2px solid var(--primary-color);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(231, 29, 54, 0.3);
}
